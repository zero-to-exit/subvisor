'''
Now we are going to use the LLM to analyze the frames.
추출된 프레임들을 LLM으로 평가하고 영상 흐름을 분석
'''

FRAME_EVALUATION_PROMPT = """당신은 YouTube 광고 영상에서 추출된 프레임들을 평가하는 전문가입니다.

## 상황 설명

제공된 이미지들은 YouTube 광고 영상(약 {duration_seconds}초)에서 추출된 대표 프레임들입니다.
이 프레임들은 다음 과정을 거쳐 선별되었습니다:
1. 전체 영상에서 모든 프레임 추출 (약 900개)
2. 블러가 심한 프레임 필터링 및 제외
3. 시간 순서에 따라 유사도 기반으로 그룹화 (약 27~32개 그룹)
4. 각 그룹에서 품질 점수가 높은 상위 2개만 선별

현재 제공된 {frame_count}개의 프레임은 시간 순서대로 정렬되어 있으며, 
영상의 주요 장면들을 대표합니다.

## 평가 기준 (각 기준별로 0~10점 평가)

**중요**: 이 평가의 목적은 영상을 대표할 수 있는 고품질 프레임을 선별하는 것입니다.
단순히 이미지의 기술적 품질뿐만 아니라, **콘텐츠의 대표성**과 **편집의 기술성**을 우선적으로 평가해주세요.

각 프레임에 대해 다음 6가지 기준으로 평가해주세요:

### 1. 콘텐츠 대표성 및 구도 (Content Representativeness & Composition) ⭐ 최우선
이 프레임이 영상의 핵심 메시지나 주요 장면을 얼마나 잘 대표하는지 평가합니다.
- **10점**: 
  - 제품/인물이 화면 중앙에 적절히 배치되어 있음
  - 사람이 등장한다면 얼굴이 선명하고 명확하게 보임
  - 프레임 자체가 영상의 핵심 장면을 완벽하게 대표함
  - 구도가 전문적이고 균형잡혀 있음
- **7-9점**: 
  - 주요 객체가 대체로 잘 배치되어 있으나 약간의 편향 있음
  - 얼굴이 보이지만 약간 흐리거나 부분적으로 가려짐
  - 핵심 내용은 전달되나 최적의 구도는 아님
- **4-6점**: 
  - 주요 객체가 화면 가장자리나 모서리에 위치
  - 얼굴이 작게 보이거나 반만 보임
  - 프레임이 영상의 부수적 장면을 보여줌
- **1-3점**: 
  - 주요 객체가 거의 보이지 않거나 매우 작음
  - 얼굴이 거의 보이지 않음
  - 프레임이 영상의 핵심과 거리가 멀음
- **0점**: 
  - 주요 콘텐츠가 전혀 보이지 않음
  - 빈 화면이나 의미없는 배경만 있음

### 2. 편집 기법의 복잡도 및 기술성 (Editing Complexity & Technicality) ⭐ 최우선
Time series에 맞게 어려운 편집 기법이 사용되었는지, 기술적 완성도를 평가합니다.
- **10점**: 
  - 복잡한 후처리 효과 적용 (컬러 그레이딩, 합성, 트랜지션 등)
  - 전문적인 영화 제작 기법 사용 (타임랩스, 슬로우모션, 스테디캠 등)
  - 창의적이고 기술적으로 어려운 편집 기법이 명확히 보임
  - 시간 순서상 해당 장면에서 적절한 편집 기법 사용
- **7-9점**: 
  - 일부 후처리나 효과가 적용됨
  - 기본적인 편집 기법이 잘 활용됨
  - 기술적 완성도가 양호함
- **4-6점**: 
  - 단순한 편집만 적용됨 (기본 컷, 페이드 등)
  - 특별한 편집 기법이 보이지 않음
  - 평범한 편집 품질
- **1-3점**: 
  - 최소한의 편집만 있음
  - 거의 원본에 가까운 상태
  - 편집 기술이 거의 보이지 않음
- **0점**: 
  - 편집 기법이 전혀 보이지 않음
  - 매우 아마추어적인 편집

### 3. 선명도 및 초점 (Sharpness & Focus)
주요 객체(제품, 인물, 텍스트 등)에 초점이 잘 맞춰져 있는지 평가합니다.
- **10점**: 
  - 매우 선명하고 날카롭게 초점이 맞춰짐
  - 특히 사람이 있다면 얼굴이 완벽하게 선명함
  - 제품이나 주요 객체가 매우 명확함
- **7-9점**: 
  - 선명함, 약간의 블러는 있으나 주요 객체는 잘 보임
  - 얼굴이나 제품의 세부사항이 대체로 명확함
- **4-6점**: 
  - 중간 정도의 블러, 가독성에 약간의 영향 있음
  - 주요 객체가 보이지만 선명도가 부족함
- **1-3점**: 
  - 심한 블러로 인해 주요 객체의 디테일 손실
  - 얼굴이나 제품의 세부사항 파악이 어려움
- **0점**: 
  - 완전히 흐려서 내용 파악 불가

### 4. 노출 및 조명 (Exposure & Lighting)
적절한 조명과 노출로 주요 콘텐츠가 잘 보이는지 평가합니다.
- **10점**: 
  - 적절한 노출, 하이라이트와 섀도우 모두 세부 표현 가능
  - 주요 객체(제품/인물)가 적절히 조명됨
- **7-9점**: 
  - 대체로 좋은 노출, 일부 영역만 약간 과/부족
  - 주요 객체는 잘 보임
- **4-6점**: 
  - 일부 영역이 과도하게 밝거나 어두움
  - 주요 객체의 일부가 보이지 않거나 너무 밝음
- **1-3점**: 
  - 심한 과노출 또는 과소노출로 세부사항 손실
  - 주요 객체가 너무 어둡거나 밝아서 식별 어려움
- **0점**: 
  - 대부분의 영역이 완전히 밝거나 어두움

### 5. 대비 및 시각적 임팩트 (Contrast & Visual Impact)
프레임의 시각적 임팩트와 대비를 평가합니다.
- **10점**: 
  - 뛰어난 대비로 명확한 계조 표현
  - 강렬한 시각적 임팩트
  - 주요 객체가 배경과 명확히 구분됨
- **7-9점**: 
  - 좋은 대비, 명확한 구분
  - 시각적으로 매력적임
- **4-6점**: 
  - 중간 수준의 대비
  - 평범한 시각적 효과
- **1-3점**: 
  - 낮은 대비로 평면적으로 보임
  - 시각적 임팩트가 부족함
- **0점**: 
  - 거의 대비가 없어 흐릿하게 보임

### 6. 색상 풍부도 및 톤앤매너 (Color Richness & Tone)
색상 표현과 전체적인 톤앤매너를 평가합니다.
- **10점**: 
  - 풍부하고 균형잡힌 색상, 자연스러운 화이트밸런스
  - 광고의 톤앤매너에 맞는 색감
- **7-9점**: 
  - 좋은 색상 표현, 약간의 편차는 있으나 자연스러움
- **4-6점**: 
  - 색상이 다소 평면적이거나 편향됨
- **1-3점**: 
  - 색상이 매우 단조로우거나 부자연스러움
- **0점**: 
  - 거의 단색이거나 색상 왜곡 심함

## 응답 형식

각 프레임에 대해 다음 형식으로 응답해주세요:

### 프레임 1 (시간: XX.XX초)
- 콘텐츠 대표성 및 구도: X/10 ⭐
- 편집 기법 복잡도 및 기술성: X/10 ⭐
- 선명도 및 초점: X/10
- 노출 및 조명: X/10
- 대비 및 시각적 임팩트: X/10
- 색상 풍부도 및 톤앤매너: X/10
- **총점: XX/60**
- **간단한 평가 의견 (2-3줄, 특히 콘텐츠 대표성과 편집 기법에 대한 의견 포함)**

### 프레임 2 (시간: XX.XX초)
...

## 영상 흐름 분석

모든 프레임 평가를 완료한 후, 이 10개 프레임을 시간 순서대로 연결하여 
영상의 전체적인 흐름과 스토리를 설명해주세요. 다음을 포함해주세요:
- 전체적인 스토리라인
- 주요 장면 전환 지점
- 강조점이나 클라이맥스
- 광고 메시지 또는 CTA (Call to Action)
- 시각적 스타일 및 톤앤매너

---

이제 제공된 {frame_count}개의 프레임 이미지를 평가해주세요."""

